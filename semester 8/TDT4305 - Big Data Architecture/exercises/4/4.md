# 1
<!-- | Time | Query | Candidates | b1 | b2 | b3 | b4 | Accu. revenue | Notes |
|------|-------|------------|----|----|----|----|---------------|-------|
| 0    |       |            |    |    |    |    |               |       |
| 1    | q1    |            |    |    |    |    |               |       |
| 2    | q2    |            |    |    |    |    |               |       |
| 3    | q3    |            |    |    |    |    |               |       |
| 4    | q4    |            |    |    |    |    |               |       |
| 5    | q3    |            |    |    |    |    |               |       |
| 6    | q3    |            |    |    |    |    |               |       |
| 7    | q2    |            |    |    |    |    |               |       |
| 8    | q4    |            |    |    |    |    |               |       | -->

| Advertiser | Query | Bid  |
|------------|-------|------|
| a1         | q1    | 0.5  |
| a4         | q1    | 0.75 |
| a2         | q2    | 0.5  |
| a3         | q2    | 0.5  |
| a1         | q3    | 1    |
| a3         | q4    | 1    |

## a - greedy
For a query pick any advertiser who has bid for that query



| Time | Query | Candidates | b1  | b2  | b3 | b4 | Accu. revenue | Notes     |
|------|-------|------------|-----|-----|----|----|---------------|-----------|
| 0    |       |            | 3   | 1   | 1  | 2  | 0             |           |
| 1    | q1    | **a1**,a4  | 2.5 |     |    |    | 0.5           | tie-break |
| 2    | q2    | **a2**,a3  |     | 0.5 |    |    | 1             | tie-break |
| 3    | q3    | **a1**     | 1.5 |     |    |    | 2             |           |
| 4    | q4    | **a3**     |     |     | 0  |    | 3             |           |
| 5    | q3    |            |     |     |    |    | 3             |           |
| 6    | q3    |            |     |     |    |    | 3             |           |
| 7    | q2    | **a2**     |     | 0.5 |    |    | 3.5           |           |
| 8    | q4    |            |     |     |    |    | 3.5           |           |


| Time | Query | Candidates,bids                                       | b1   | b2 | b3 | b4 | Accu. revenue | Notes       |
|------|-------|--------------------------------------|------|----|----|----|---------------|-------------|
|1|1|['1,1', '4,1']|2|1|1|2|1|
|2|2|['2,1', '3,1']|2|0|1|2|2|
|3|3|['1,1']|1|0|1|2|3|
|4|4|['3,1']|1|0|0|2|4|
|5|3|['1,1']|0|0|0|2|5|
|6|3|['1,1']|0|0|0|2|5|
|7|2|['2,1', '3,1']|0|0|0|2|5|
|8|4|['3,1']|0|0|0|2|5|

## b - balance
Given advertisers {a1,a2,a3...} with budgets {b1,b2,b3...} along with their bids for each query, and a list of queries [q1,q2,q3]
- for each query q, pick the advertiser a with largest unspent budget b that also can afford the bid
- break ties arbitrarily, but deterministically




## c - Generalized Balance

<!-- 
| Advertiser | Query | Bid  |
|------------|-------|------|
| a1         | q1    | 0.5  |
| a4         | q1    | 0.75 |
| a2         | q2    | 0.5  |
| a3         | q2    | 0.5  |
| a1         | q3    | 1    |
| a3         | q4    | 1    | 
-->
select as candidate even though budget is not enough
| Time | Query | Candidates,bids        | scores                               | b1   | b2 | b3 | b4 | Accu. revenue | Notes       |
|------|-------|------------------------|--------------------------------------|------|----|----|----|---------------|-------------|
| 0    |       |                        |                                      | 3    | 1  | 1  | 2  | 0             |             |
| 1    | q1    | (a1,0.5),**(a4,0.75)** | 0.5(1-e^-1)=0.32 , 0.75(1-e^-1)=0.47 | 2.25 |    |    |    | 0.75          |             |
| 2    | q2    | **(a2,0.5)**,(a3,0.5)  | 0.5(1-e^-1)=0.32 , 0.5(1-e^-1)=0.32  |      | 0.5|    |    | 1.25          | tie-breaker |
| 3    | q3    | **(a1,0.5)**           | pruned                               | 1.75 |    |    |    | 1.75          |             |
| 4    | q4    | **(a3,1)**             | pruned                               |      |    |0   |    | 2.75          |             |
| 5    | q3    | **(a1,1)**             | pruned                               | 0.75 |    |    |    | 3.75          |             |
| 6    | q3    |                        |                                      |      |    |    |    | 3.75          | no cand     |
| 7    | q2    | **(a2,0.5)**,(a3,0.5)  | 0.5(1-e^-1)=0.32 , 0.5(1-e^-1)=0.32  |      |    |    |    | 4.25          | tie-breaker |
| 8    | q4    |                        |                                      |      |    |    |    | 4.25          | no cand     |


| Time | Query | Candidates,bids     | scores                                                                            | b1 | b2  | b3 | b4   | Accu. revenue | Notes |
|------|-------|---------------------|-----------------------------------------------------------------------------------|----|-----|----|------|---------------|-------|
| 1    | 1     | ['1,0.5', '4,0.75'] | ['0.5*(1-e^(-1))=0.31606027941427883, ', '0.75*(1-e^(-1))=0.47409041912141825, '] | 3  | 1   | 1  | 1.25 | 0.75          |       |
| 2    | 2     | ['2,0.5', '3,0.5']  | ['0.5*(1-e^(-1))=0.31606027941427883, ', '0.5*(1-e^(-1))=0.31606027941427883, ']  | 3  | 0.5 | 1  | 1.25 | 1.25          |       |
| 3    | 3     | ['1,1']             | ['1*(1-e^(-1))=0.6321205588285577, ']                                             | 2  | 0.5 | 1  | 1.25 | 2.25          |       |
| 4    | 4     | ['3,1']             | ['1*(1-e^(-1))=0.6321205588285577, ']                                             | 2  | 0.5 | 0  | 1.25 | 3.25          |       |
| 5    | 3     | ['1,1']             | ['1*(1-e^(-1))=0.6321205588285577, ']                                             | 1  | 0.5 | 0  | 1.25 | 4.25          |       |
| 6    | 3     | ['1,1']             | ['1*(1-e^(-1))=0.6321205588285577, ']                                             | 0  | 0.5 | 0  | 1.25 | 5.25          |       |
| 7    | 2     | ['2,0.5', '3,0.5']  | ['0.5*(1-e^(-1))=0.31606027941427883, ', '0.5*(1-e^(-1))=0.31606027941427883, ']  | 0  | 0.0 | 0  | 1.25 | 5.75          |       |
| 8    | 4     | ['3,1']             | ['1*(1-e^(-1))=0.6321205588285577, ']                                             | 0  | 0.0 | 0  | 1.25 | 5.75          |       |